
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <style>
        td{
            text-align:center;
        }
    </style>
</head>
<body>
    <fieldset>
        <legend>Input Controls</legend>
        <input type="text" placeholder="제목 입력" id="title"><br>
        <input type="text" placeholder="내용 입력" id="contents"><br>
        <input type="text" placeholder="작성자 입력" id="writer">
        <button id="add">추가하기</button> <br><br>
        <input type="text" id="deltitle" placeholder="삭제할 대상 제목">
        <button id="del">삭제하기</button>
    </fieldset>
    <hr>
    <table border=1 id="table">
        <tr>
            <th>제목</th>
            <th>내용</th>
            <th>작성자</th>
            <!-- <th>삭제</th> -->
        </tr>


    </table>    
    <script>
        // $("#table").on("click",".delete",function(){
        //     console.log($(this).parent().parent().remove())
        //     // this는 자바스크립트. $(this)로 jquery사용
        //     // parent().parent() 로 tr 선택
        // })

        // $(".delete").on("click",function(){
        //     alert("ABC");
        // }) // 정적바인딩

        // $("#table").on("click",".delete",function(){
        //     alert("TEST");
        // })
        // 동적 바인딩 : 동적으로 추가되는 요소에 이벤트를 주기 위해서는
        //              그 동적 요소를 포함하는 정적 parent 에 이벤트를 할당해야 함.

        //동적바인딩은 정적바인딩이 생성된 순간 적용이 되도록 대기
        //정적바인딩은 코드순서에 영향을 받아 지나간이후에 적용이 되지 않는다.

        // jquery에서는 이벤트가 두세번 겹칠 수 있다.
        $("#add").on("click",function(){
            let title = $("#title").val();
            let contents = $("#contents").val();
            let writer = $("#writer").val();

            if(title.trim()=="" || contents.trim()=="" || writer.trim() == ""){
                alert("값을 모두 입력해야 합니다.");
                return;
            }

            let tdTitle = $("<td>");
            let tdContents = $("<td>");
            let tdWriter = $("<td>");

            $("#del").on("click",function(){
                let deltitle = $("#deltitle").val();
                let row = $("#table").children().children();
                for(let i=1; i<row.length; i++){
                    if(deltitle == $($(row[i]).children()[0]).html()){
                        $(row[i]).remove();
                    }
                }
            })
            // let tdDelete = $("<td>");
            // let btnDelete = $("<button class='delete'>");
            // btnDelete.html("X");
            // tdDelete.append(btnDelete);

            tdTitle.append(title);
            tdContents.append(contents);
            tdWriter.append(writer);

            let trLine = $("<tr>");
            trLine.append(tdTitle,tdContents,tdWriter/*,tdDelete*/);

            $("#table").append(trLine);
            $("#title,#contents,#writer").val("");

        });


    </script>
</body>
</html>