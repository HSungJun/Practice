<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <style>
        /* 댓글작성창 CSS */
        .container{
            margin: auto; width: 800px; height: 150px;
            border:2px solid black; border-radius: 5px; box-sizing: border-box;

        }
        
        #writerbox{height: 20%; border-bottom: 2px solid black; background-color: gainsboro;}
        #writer{margin: auto; height: 80%; width: 80%; background-color: gainsboro; 
            border: none; margin-top: 2px; border-radius: 5px;}
        #replybox{width: 100%; height: 80%;}
        #inputreply{width: 100%; height: 100%;}
        #value{width: 79%; height: 93%; margin-top: 1px;}
        #send{float: right; width: 20%; height: 99%;}
        
        /* 달린 댓글 fieldset */
        #replycontents{margin: auto; width: 800px; border: 2px solid black;
        border-radius: 10px;}
        /* 달린 댓글 새로운 창 */
        #newreplybox{margin: auto; width: 800px; height: 150px;
            border:2px solid black; border-radius: 5px; box-sizing: border-box;}
        #replywriterbox{height: 20%; border-bottom: 2px solid black; 
            background-color: gainsboro; margin-left: 3px;}
        #replyvaluebox{width: 100%; height: 80%;}
        #replyinnerbox{float: left; width: 80%; height: 100%; border-right: 2px solid black;}
        #replydelbox{float: right; width: 18%; height: 99%;}
        .replydelbtn{margin-left: 30px; margin-top: 45px;}
        

    </style>
</head>
<body>
    <div class="container">
        <div id="writerbox">
            <input type="text" id="writer" placeholder="작성자명을 입력해주세요">
        </div>
        <div id="replybox">
            <div id="inputreply">
                <input type="text" id="value" value="">
                <button id="send">reply</button>
            </div>
        </div>
    </div>
    <hr>
    <fieldset id="replycontents">
        <legend>달린 댓글</legend>
        <br>
    </fieldset>



    <script>
        let list = [];
        
        

        $("#send").on("click",function(){
            let writer = $("#writer").val();
            let value = $("#value").val();
            
            if(writer != "" || value != ""){
            
                    // replyContent에 들어갈 내용 (작성댓글 박스 및 내용 생성)
                let newReplyBox = $("<div>").attr("id","newreplybox");
                let replyInnerBox = $("<div>").attr("id","replyinnerbox");
                let replyWriterBox = $("<div>").attr("id","replywriterbox");
                let replyWriter = $("<div>").attr("id","replyWriter");
                let replyValueBox = $("<div>").attr("id","replyvaluebox")
                let replyDelBox = $("<div>").attr("id","replydelbox");
                let replyDelBtn = $("<button>");
                    replyDelBtn.addClass("replydelbtn");
                    // 작성한 곳에서 값 얻어오기
                replyDelBtn.html("삭제하기");
                replyWriter.html(writer);
                replyInnerBox.html(value);
                    // replyBox안에 다른내용 삽입
                replyWriterBox.append(replyWriter);
                replyDelBox.append(replyDelBtn);
                replyValueBox.append(replyInnerBox);
                replyValueBox.append(replyDelBox);
                newReplyBox.append(replyWriterBox);
                newReplyBox.append(replyValueBox);

                
                
                    // 데이터 push
                $("#replycontents").append(newReplyBox);
                list.push(newReplyBox);
                $("#writer").val("");
                $("#value").val("");
                }else{
                    alert("작성자명 및 내용 모두 입력해주세요!")
                }   
        })
        //삭제기능
        $("#replycontents").on("click",".replydelbtn",function(){
            list.splice(list.indexOf($(this).parent().parent().parent()),1);
            $(this).parent().parent().parent().remove()
            
        })

    </script>
</body>
</html>