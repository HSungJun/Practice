<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2b6fadaf29158508981fdf9b53294377"></script>
</head>

<body>

    <!-- 지도를 표시할 div 입니다 -->
    <div id="map" style="width:100%;height:500px;"></div>
    <br>
    현재 마커의 개수는 <span id="count">0</span> 개 입니다.

    <br><br>
    <button id="clear">삭제</button>
    <script>

        // Map에 클릭하는 addListener의 function안에 
        // 우클릭하는 addListener를 다시 호출해야하는 이유를 잘 모르겠습니다.

        var markers = [];
        var spanCount = document.getElementById("count");
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
            mapOption = {
                center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                level: 3 // 지도의 확대 레벨
            };

        var map = new kakao.maps.Map(mapContainer, mapOption);
        
        

        
        kakao.maps.event.addListener(map, "click", function (e) {
            var pos = e.latLng;

            var marker = new kakao.maps.Marker({
                position: pos
            });

            kakao.maps.event.addListener(marker, "rightclick", function () {
                marker.setMap(null);
                markers.splice(markers.indexOf(marker),1);
                spanCount.innerHTML = markers.length;
            });

            marker.setMap(map);
            markers.push(marker);
            spanCount.innerHTML = markers.length;
        });

        document.getElementById("clear").onclick = function(){
            for(var i = 0; i < markers.length; i++){
                markers[i].setMap(null);
            };
            markers=[];
        }
    </script>
</body>

</html>